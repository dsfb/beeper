<html>
<head>
    <script src="https://unpkg.com/vue"></script>
    <script>
        example = [
            {
                "title": "TITULO1",
                "timers": [
                    {
                        "unit": "s",
                        "time": "30",
                        "sound": "audiofile0.wav"
                    },
                    {
                        "unit": "m",
                        "time": "01:30",
                        "sound": "audiofile1.wav"
                    }
                ],
            },
            {
                "title": "TITULO2",
                "timers": [
                    {
                        "unit": "h",
                        "time": "2:10:20",
                        "sound": "audiofile2.wav"
                    },
                    {
                        "unit": "m",
                        "time": "1",
                        "sound": "audiofile3.wav"
                    }
                ],
            },
        ]

        // convert any time format to seconds
        any_to_seconds = function(time, unit)
        {
            value = 0;

            if (unit == 's') // seconds
            {
                value = parseInt(unit)
            }
            else if (unit == 'm')
            {

            }
            else if (unit == 'h')
            {

            }
            else
            {
                console.log('invalid unit')
                return;
            }

            if (isNaN(value))
            {
                console.log('invalid timer value')
                return
            }
        }

        window.onload = function ()
        {
            var app6 = new Vue({
                el: '#app-6',
                data: {
                    data: example,
                },
                methods: {
                    addTimer: function(timers)
                    {
                        timers.push({
                            "unit": "",
                            "time": "",
                            "sound": ""
                        })
                    },
                    addPanel: function()
                    {
                        panel = {
                            "title": "NewPanel",
                            "timers": [],
                        }

                        this.addTimer(panel["timers"])
                        this.data.push(panel)
                    },
                    removeTimer: function(timers, index)
                    {
                        console.log(timers[index], index);
                        timers.splice(index, 1)
                    },
                    removePanel: function(panels, index)
                    {
                        panels.splice(index, 1)
                    },
                    startTimers: function(panel_index)
                    {
                    },
                    stopTimers: function(panel_index)
                    {
                    }
                }
            });
        }
    </script>

    <style>
        .tpanel {
            background: #f00
        }

        .ttitle {
            background: #0f0
        }

        .trow {
            background: #00f
        }
    </style>
</head>

<body>
    <div id="app-6">
        <button v-on:click="addPanel()">+ panel</button>
        <div v-for="(panel, panel_idx) in data" class="tpanel">
            <div class="ttitle">
                <input type="text" v-model="panel.title" />
                <div><a href="#" v-on:click="removePanel(data, index)">x</a></div>
            </div>
            <div v-for="(timer, index) in panel.timers" class="trow">
                <div>
                    <select v-model="timer.unit">
                        <option value="s">seconds</option>
                        <option value="m">minutes</option>
                        <option value="h">hours</option>
                    </select>
                </div>
                <div><input v-model="timer.time" /></div>
                <div>
                    <select v-model="timer.sound">
                        <option value="audiofile0.wav">Beep</option>
                        <option value="audiofile1.wav">Good Morning</option>
                        <option value="audiofile2.wav">Seat Belt</option>
                        <option value="audiofile3.wav">Chicken</option>
                    </select>
                </div>
                <div><a href="#" v-on:click="removeTimer(panel.timers, index)">x</a></div>
            </div>
            <button v-on:click="addTimer(panel.timers)">+ timer</button>
            <button v-if="!is_running" v-on:click="startTimers(panel_idx)">start</button>
            <button v-if="is_running" v-on:click="stopTimers(panel_idx)">stop</button>
        </div>
    </div>
</body>
</html>

